(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function l(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(t){if(t.ep)return;t.ep=!0;const a=l(t);fetch(t.href,a)}})();const B={};B.show=function(){if(!B.el){const e=document.querySelector(".popup-wrapper"),o=document.querySelector(".popup-wrapper__body"),l=e.querySelector("button.modify"),n=e.querySelector("button.delete"),t=e.querySelector("button.copy");e.addEventListener("click",function(){B.hide()}),l.onclick=function(a){a.preventDefault();const r=this.parentElement.previousElementSibling.value,u=Number(this.parentElement.previousElementSibling.dataset.index);tasks.splice(u,1,JSON.parse(r)),syncLocal(),B.hide(),redrawChart(!0)},n.onclick=function(a){a.preventDefault();const r=Number(this.parentElement.previousElementSibling.dataset.index);confirm("Are you sure to DELETE the task?")&&(tasks.splice(r,1),syncLocal()),B.hide(),redrawChart(!0)},t.onclick=function(a){a.preventDefault();const r=Number(this.parentElement.previousElementSibling.dataset.index),u={...tasks[r],duration:1};tasks.splice(r+1,0,u),console.log(tasks[r]),syncLocal(),B.hide(),redrawChart(!0)},o.onclick=function(a){a.stopPropagation()},B.el=e}B.el.style.display="flex"};B.hide=function(){B.el.style.display="none"};function dt(e,o,l){if(e&&e.length){const[n,t]=o,a=Math.PI/180*l,r=Math.cos(a),u=Math.sin(a);for(const p of e){const[s,i]=p;p[0]=(s-n)*r-(i-t)*u+n,p[1]=(s-n)*u+(i-t)*r+t}}}function Tt(e,o,l){const n=[];e.forEach(t=>n.push(...t)),dt(n,o,l)}function Et(e,o){return e[0]===o[0]&&e[1]===o[1]}function mt(e,o,l,n=1){const t=l,a=Math.max(o,.1),r=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,u=[0,0];if(t)for(const s of r)dt(s,u,t);const p=Rt(r,a,n);if(t){for(const s of r)dt(s,u,-t);Tt(p,u,-t)}return p}function Rt(e,o,l){const n=[];for(const s of e){const i=[...s];Et(i[0],i[i.length-1])||i.push([i[0][0],i[0][1]]),i.length>2&&n.push(i)}const t=[];o=Math.max(o,.1);const a=[];for(const s of n)for(let i=0;i<s.length-1;i++){const h=s[i],S=s[i+1];if(h[1]!==S[1]){const H=Math.min(h[1],S[1]);a.push({ymin:H,ymax:Math.max(h[1],S[1]),x:H===h[1]?h[0]:S[0],islope:(S[0]-h[0])/(S[1]-h[1])})}}if(a.sort((s,i)=>s.ymin<i.ymin?-1:s.ymin>i.ymin?1:s.x<i.x?-1:s.x>i.x?1:s.ymax===i.ymax?0:(s.ymax-i.ymax)/Math.abs(s.ymax-i.ymax)),!a.length)return t;let r=[],u=a[0].ymin,p=0;for(;r.length||a.length;){if(a.length){let s=-1;for(let h=0;h<a.length&&!(a[h].ymin>u);h++)s=h;a.splice(0,s+1).forEach(h=>{r.push({s:u,edge:h})})}if(r=r.filter(s=>!(s.edge.ymax<=u)),r.sort((s,i)=>s.edge.x===i.edge.x?0:(s.edge.x-i.edge.x)/Math.abs(s.edge.x-i.edge.x)),(l!==1||p%o===0)&&r.length>1)for(let s=0;s<r.length;s=s+2){const i=s+1;if(i>=r.length)break;const h=r[s].edge,S=r[i].edge;t.push([[Math.round(h.x),u],[Math.round(S.x),u]])}u+=l,r.forEach(s=>{s.edge.x=s.edge.x+l*s.edge.islope}),p++}return t}window.hachureLines=mt;const gt={"01-01":{holiday:!0,name:"元旦",wage:3,date:"2024-01-01",rest:1},"02-04":{holiday:!1,name:"春节前补班",wage:1,after:!1,target:"春节",date:"2024-02-04",rest:34},"02-10":{holiday:!0,name:"初一",wage:3,date:"2024-02-10",rest:40},"02-11":{holiday:!0,name:"初二",wage:3,date:"2024-02-11"},"02-12":{holiday:!0,name:"初三",wage:3,date:"2024-02-12"},"02-13":{holiday:!0,name:"初四",wage:2,date:"2024-02-13"},"02-14":{holiday:!0,name:"初五",wage:2,date:"2024-02-14"},"02-15":{holiday:!0,name:"初六",wage:2,date:"2024-02-15"},"02-16":{holiday:!0,name:"初七",wage:2,date:"2024-02-16"},"02-17":{holiday:!0,name:"初八",wage:2,date:"2024-02-17"},"02-18":{holiday:!1,name:"春节后补班",wage:1,after:!0,target:"春节",date:"2024-02-18"},"04-04":{holiday:!0,name:"清明节",wage:3,date:"2024-04-04",rest:46},"04-05":{holiday:!0,name:"清明节",wage:2,date:"2024-04-05"},"04-06":{holiday:!0,name:"清明节",wage:2,date:"2024-04-06"},"04-07":{holiday:!1,name:"清明节后补班",wage:1,target:"清明节",after:!0,date:"2024-04-07"},"04-28":{holiday:!1,name:"劳动节前补班",wage:1,target:"劳动节",after:!1,date:"2024-04-28"},"05-01":{holiday:!0,name:"劳动节",wage:3,date:"2024-05-01"},"05-02":{holiday:!0,name:"劳动节",wage:2,date:"2024-05-02"},"05-03":{holiday:!0,name:"劳动节",wage:3,date:"2024-05-03"},"05-04":{holiday:!0,name:"劳动节",wage:3,date:"2024-05-04"},"05-05":{holiday:!0,name:"劳动节",wage:3,date:"2024-05-05"},"05-11":{holiday:!1,name:"劳动节后补班",after:!0,wage:1,target:"劳动节",date:"2024-05-11"},"06-08":{holiday:!0,name:"端午节",wage:2,date:"2024-06-08"},"06-09":{holiday:!0,name:"端午节",wage:2,date:"2024-06-09"},"06-10":{holiday:!0,name:"端午节",wage:3,date:"2024-06-10"},"09-14":{holiday:!1,name:"中秋节前补班",after:!1,wage:1,target:"中秋节",date:"2024-09-14"},"09-15":{holiday:!0,name:"中秋节",wage:2,date:"2024-09-15"},"09-16":{holiday:!0,name:"中秋节",wage:2,date:"2024-09-16"},"09-17":{holiday:!0,name:"中秋节",wage:3,date:"2024-09-17"},"09-29":{holiday:!1,name:"国庆节前补班",after:!1,wage:1,target:"国庆节",date:"2024-09-29"},"10-01":{holiday:!0,name:"国庆节",wage:3,date:"2024-10-01"},"10-02":{holiday:!0,name:"国庆节",wage:3,date:"2024-10-02",rest:1},"10-03":{holiday:!0,name:"国庆节",wage:3,date:"2024-10-03"},"10-04":{holiday:!0,name:"国庆节",wage:2,date:"2024-10-04"},"10-05":{holiday:!0,name:"国庆节",wage:2,date:"2024-10-05"},"10-06":{holiday:!0,name:"国庆节",wage:2,date:"2024-10-06",rest:1},"10-07":{holiday:!0,name:"国庆节",wage:2,date:"2024-10-07",rest:1},"10-12":{holiday:!1,after:!0,wage:1,name:"国庆节后补班",target:"国庆节",date:"2024-10-12"}};function yt(e){const o=new Date(e),l=o.getMonth()+1+"",n=l.padStart(2,"0"),t=o.getDate()+"",a=t.padStart(2,"0"),r=`${n}-${a}`,u=[0,6].indexOf(o.getDay())!=-1;return gt[r]?{isHoliday:gt[r].holiday,dateString:`${l}-${t}`}:{isHoliday:u,dateString:`${l}-${t}`}}let P=null;const _=e=>{P=e},it=k("debug")??!1,Bt="alexq",c=k()??160,q=c/2,rt=k("taskNamePaddingLeft")??15,Xt=1,Ct=50,L=k("timeScaleHeight")??20,K=k("milestoneTopHeight")??20,f=k("barHeight")??30,w=it?10:k("barMargin")??1,Ht=k("scrollSpeed")??35,Dt=k("includeHoliday")??!1,ut=k("useLocal"),wt=k("useRemote"),at=k("view",!1)??"",$t=!wt&&!ut&&k("mockTaskSize")?Number(k("mockTaskSize")):0,pt=Math.floor((+new Date-+new Date("2024-01-01"))/(60*60*24*1e3)),xt=document.querySelector("#last-scroll-x");function k(e="unitWidth",o=!0){const l=new URLSearchParams(location.search);return l.get(e)&&o?Number(l.get(e)):l.get(e)}function $(){Nt()||k("useLocal")&&Object.keys(st).forEach(e=>{const o=localStorage.getItem(e);try{localStorage.setItem(e,JSON.stringify(window[e]))}catch{console.error("fail to syncLocal"),localStorage.setItem(e,o)}})}window.syncLocal=$;let lt=null;function Nt(){if(k("useRemote")){const e={tasks:window.tasks,mileStones:window.mileStones};return lt&&clearTimeout(lt),lt=setTimeout(()=>{vt(e).then(o=>{o.status===0&&console.log("recordUpdate成功",o)})},200),!0}return!1}const St=localStorage.getItem("remoteHost")?localStorage.getItem("remoteHost"):"http://localhost:3004";function vt(e){return fetch(`${St}/record/add`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({view:at,...e})}).then(o=>o.json())}function Pt(){return console.log("current view",at),fetch(`${St}/record/query${at?`?view=${at}`:""}`).then(e=>e.json())}const st={tasks:[{}],mileStones:[]};function zt(e="tasks"){try{return localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):st[e]}catch{return console.error("fail to getLocal"),st[e]}}function F(){const e=Math.floor(Math.random()*256),o=Math.floor(Math.random()*256),l=Math.floor(Math.random()*256);return"#"+e.toString(16).padStart(2,"0")+o.toString(16).padStart(2,"0")+l.toString(16).padStart(2,"0")}function It(e,o){e.dom.hidden=!0,Pt().then(l=>{const{data:n}=l;console.log(n),window.tasks.length=0,window.mileStones.length=0,n!=null&&n.tasks||n!=null&&n.mileStones?(window.tasks.push(...n.tasks),window.mileStones.push(...n.mileStones)):n||window.tasks.push({}),o(!0),e.dom.hidden=!1})}function Ot(e){const o=e?{view:`${e}`}:{};vt({tasks:window.tasks,mileStones:window.mileStones,...o})}window.saveToRemote=Ot;function Wt(e){Object.keys(st).forEach(o=>{const l=localStorage.getItem(o);try{localStorage.setItem(o,JSON.stringify(window[o]))}catch{console.error("fail to syncLocal"),localStorage.setItem(o,l)}})}window.saveToLocal=Wt;function qt(e,o,l,n){const t=document.querySelector("#back-to-origin-button");t==null||t.addEventListener("click",function(){e(0),o(0),l.innerText=0,n(!0)});const a=document.querySelector("#clear-button");a==null||a.addEventListener("click",function(){const u=tasks.length;tasks.length=0;for(let p=0;p<u;p++)tasks.push({});$(),n(!0)});const r=document.querySelector("#clear-milestone-button");r==null||r.addEventListener("click",function(){mileStones.length=0,$(),n(!0)})}function At(){return zrender.path.createFromString("M3.333,10v 5 c0,0.184 -0.149, 0.333 -0.333, 0.333 h-0.667A0.333, 0.333 0 0 1 2, 15 V 1.333 c0, -0.368 0.298, -0.666 0.667, -0.666 h 11.525 a 0.667, 0.667 0 0 1 0.581, 0.994 L 12.76, 5.233 a 0.333, 0.333 0 0 0 0.002, 0.33 L 14.753, 9 A 0.667, 0.667 0 0 1 14.176, 10 H 3.333z",{style:{fill:"#F54A45"}})}function jt(e,o,l,n,t){const a=new zrender.Group,r=At(),{width:u,height:p}=r.getBoundingRect();r.attr({x:o+l-u/2,y:n-t+t/2-p/2});const s=new zrender.Circle({shape:{cx:o+l+1,cy:n-t+t/2,r:12},style:{fill:"rgba(211, 211, 211, 0.5)"}});return a.add(s),a.add(r),a.hide(),e.add(a),[a,{flag:r,flagHoveredCircle:s}]}function Ft(e,o,l,n){const{height:t,width:a}=l,r=new zrender.Rect({name:"leftBar",style:{fill:`rgba(0, 255, 0, ${it?1:0})`,lineWidth:1},shape:{width:e,height:t},draggable:"horizontal",cursor:"ew-resize",z:1});r.attr({x:o.x,y:o.y,shape:{x:-e/2,y:0}});let u=0,p=0,s=0;return r.on("dragstart",function(i){this.parent.resizing=!0,u=i.event.zrX;const h=this.taskBar;s=h.shape.width,p=h.shape.x,_(this.parent)}),r.on("drag",function(i){const h=i.event.zrX-u;this.taskBar.attr({shape:{x:p+h,width:s-h}})}),r.on("dragend",function(i){const h=i.event.zrX-u,S=h<0?-1:1,H=Math.abs(h),A=H%c,N=S*(Math.floor(H/c)+Math.floor(A/q));console.log(N);const J=tasks[this.parent.index];J.start+=N,J.duration-=N,N&&$(),_(null),n(!0)}),r}function _t(e,o,l,n){const{height:t,width:a}=l,r=new zrender.Rect({style:{fill:`rgba(255, 192, 203, ${it?1:0})`,lineWidth:1},shape:{width:e,height:t},draggable:"horizontal",cursor:"ew-resize",z:1});r.attr({x:o.x+a,y:o.y,shape:{x:-e/2,y:0}});let u=0,p=0;return r.on("dragstart",function(s){this.parent.resizing=!0,u=s.event.zrX;const i=this.taskBar;p=i.shape.width,i.shape.x,console.log(P),_(this.parent)}),r.on("drag",function(s){const i=s.event.zrX-u;this.taskBar.attr({shape:{width:p+i}})}),r.on("dragend",function(s){const i=s.event.zrX-u,h=i<0?-1:1,S=Math.abs(i),H=S%c,A=h*(Math.floor(S/c)+Math.floor(H/q)),N=tasks[this.parent.index];N.duration+=A,A&&$(),_(null),n(!0)}),r}const Jt=+new Date("2024-01-01"),Yt=60*60*24*1e3;function Gt(e,o){const{start:l,duration:n}=e;if(o)return e.duration;let t=0;const a=n+l;for(let r=l;r<a;r++)yt(new Date(Jt+Yt*r)).isHoliday||t++;return t}function Ut(e,o,l,n,t){return t<0||t>tasks.length-2?null:new zrender.Rect({shape:{x:e+l,y:o+(f+w)*t,width:n*c,height:1},style:{fill:"blue"},zlevel:1})}function Vt(e,o,l,n,t,a,r){const u=new zrender.Rect({shape:{x:o+r*c-1+q,y:l,width:2,height:tasks.length*(t+a)},style:{fill:"#2955c9"},z:1}),p=new zrender.Circle({shape:{cx:o+r*c+q,cy:l-n+n+2,r:3},style:{fill:"#2955c9"}});e.add(u),e.add(p)}let ct=null,X=0+(pt-1)*c;const m=zrender.init(document.getElementById("zrender-container"),{renderer:"canvas"});wt&&(document.title+=" (Remote)",It(m,C));const v=ut?zt():[{name:"Task 1",start:0,duration:3,resource:"John",fillColor:F()},{name:"Task 2",start:2,duration:4,resource:"Jane",fillColor:F()},{name:"Task 3 long long long",start:7,duration:1,resource:"Bob",fillColor:F()},{name:"Task 4",start:8,duration:2,resource:"Bose",fillColor:F()},{name:"Task 5",start:10,duration:8,resource:"Uno",fillColor:F()},{}],Kt=v.pop();for(;v.length>1&&v.length<$t;)v.push(...v.map(e=>({...e})));v.push(Kt);window.tasks=v;const Q=ut?zt("mileStones"):[{start:10,name:"提测"}];window.mileStones=Q;m.on("mousewheel",function(e){e.event.preventDefault(),X-=Math.floor(e.event.wheelDeltaX*.01*Ht),C(!0,X,0),xt.innerText=X});window.addEventListener("resize",function(){m.resize(),C(!0)});qt(e=>X=e,e=>e,xt,C);function C(e,o=X,l=0){const n=Xt-o,t=Math.max(Ct,L+K)-l;e&&m.clear();const a=m.getWidth(),r=m.getHeight(),u=Math.floor(X/c),p=Math.floor((X+a)/c);let s,i;function h(d){if(P!=null&&P.resizing||P!=null&&P.dragging)return;const z=d.event.zrX-n,M=d.event.zrY-t,x=Math.floor(z/c),g=Math.floor(M/(f+w));if(s!==[x,g].join())if(s=[x,g].join(),g>=0&&g<v.length){if(x>=v[g].start&&x<v[g].start+v[g].duration){i&&m.remove(i);return}const y=new zrender.Group;y.on("click",function(){console.log("dayHoverGroup clicked pos: ",[x,g]);const O=prompt("task name?");if(!O)return;const W=prompt("assign to who?")||Bt;v.splice(g,0,{name:O,start:x,duration:1,resource:W,fillColor:F()}),$(),C(!0)});const T=new zrender.Rect({shape:{x:n+c*x+5,y:t+(f+w)*g,width:c-10,height:f+w},style:{fill:"transparent",stroke:"gray",lineDash:[5,7]},z:100}),E=new zrender.Rect({shape:{x:n+X,y:t+(f+w)*g,width:c*S,height:f+w},style:{fill:"rgba(221, 221, 221, 0.3)"},z:1}),I=new zrender.Line({shape:{x1:n+c*x+c/2-5,y1:t+(f+w)*g+(f+w)/2,x2:n+c*x+c/2+5,y2:t+(f+w)*g+(f+w)/2},style:{stroke:"gray"},z:100}),Y=new zrender.Line({shape:{x1:n+c*x+c/2,y1:t+(f+w)*g+(f+w)/2-5,x2:n+c*x+c/2,y2:t+(f+w)*g+(f+w)/2+5},style:{stroke:"gray"},z:100});y.add(T),y.add(I),y.add(Y),y.add(E),i&&m.remove(i),i=y,m.add(y)}else i&&m.remove(i)}ct&&m.off("mousemove",ct),ct=h,m.on("mousemove",h);const S=Math.ceil(a/c),H=new zrender.Rect({shape:{x:n+X,y:t-L,width:S*c,height:L},style:{fill:"rgba(255, 0,0, .2)"}});m.add(H);const A=n,N=S*c,J=S+1,kt=Math.floor(X/c);for(let d=0+kt,z=0;z<J;d++,z++){const M=Math.min(v.length,(r-t)/(f+w)),x=A+d*c,g=new zrender.Line({shape:{x1:x,y1:t-L,x2:x,y2:t+(f+w)*M},style:{stroke:"lightgray"}});if(z<J-1){const y=+new Date("2024-01-01")+d*60*1e3*60*24,T=yt(y);if(T.isHoliday)try{mt([[n+d*c,t],[n+d*c+c,t],[n+d*c+c,t+(f+w)*M],[n+d*c,t+(f+w)*M]],10,45).forEach(D=>{const[tt,et]=D[0],[nt,G]=D[1],b=new zrender.Line({shape:{x1:tt,y1:et,x2:nt,y2:G},style:{stroke:"rgba(221, 221, 221, 0.7)"}});m.add(b)})}catch(R){console.log(R)}const E=new zrender.Text({style:{text:T.dateString,x,y:t-L},z:1}),[I,{flag:Y}]=jt(m,x,q,t,L);E.on("click",function(){console.log("date text click",d);const R=Q.findIndex(D=>D.start===d);if(R===-1){if(confirm("Do you want to CREATE a milestone here?")){const D=prompt("mileStone name?");Q.push({start:d,name:D}),$()}}else confirm("Do you want to DELETE the milestone here?")&&(Q.splice(R,1),$());C(!0)}),E.on("mouseover",function(R){this.attr({style:{opacity:0}}),I.show()}),E.on("mouseout",function(R){this.attr({style:{opacity:1}}),I.hide()});const{width:O,height:W}=E.getBoundingRect();E.attr({style:{x:x-O/2+q,y:t-L-W/2+L/2}}),m.add(E)}m.add(g)}v.length+1;for(let d=0;d<1;d++){const z=t+d*(f+w),M=new zrender.Line({shape:{x1:n,y1:z,x2:N+n,y2:z},style:{stroke:"lightgray"}});m.add(M)}Vt(m,n,t,L,f,w,pt),Q.forEach(function(d){const z=new zrender.Rect({shape:{x:n+d.start*c-1,y:t-L,width:2,height:v.length*(f+w)+L},style:{fill:"rgba(255, 0, 0, 1)"},z:1}),M=new zrender.Rect({shape:{x:n+d.start*c-1,y:t-L-K,width:10,height:K},style:{fill:"rgba(255, 0, 0, 1)"},z:1}),x=new zrender.Text({style:{x:n+d.start*c-1+10,y:t-L-K,text:d.name||"里程碑",fill:"white",lineHeight:K,fontSize:12},z:1}),g=x.getBoundingRect();M.attr({shape:{width:g.width+10*2}}),m.add(z),m.add(M),m.add(x)});let ht=0;v.forEach(function(d,z){if(!(d!=null&&d.name)||z>Math.floor((r-t)/(f+w))||d.start>p||d.start+d.duration<u)return;ht++;const M=n+d.start*c,x=t+(f+w)*z,g=d.duration*c,Z={width:g,height:f},y=new zrender.Group({x:M,y:x,draggable:!0}),T=new zrender.Rect({shape:{x:0,y:0,width:g,height:f,r:6},style:{fill:d.fillColor},cursor:"move"});y.add(T),y.index=z;const E=6,I=T.getBoundingRect(),Y=Ft(E,I,Z,C);Y.taskBar=T,y.add(Y);const O=_t(E,I,Z,C);O.taskBar=T,y.add(O),y.on("mouseover",function(){this.dragging||T.attr("style",{fill:zrender.color.lift(d.fillColor,.3)})}),y.on("mouseout",function(){this.dragging||this.resizing||T.attr("style",{fill:d.fillColor})});const W=new zrender.Text({style:{text:d.name,x:rt,y:f/2-12/2,textFill:"white",textAlign:"left",textVerticalAlign:"middle",fill:"white"},cursor:"move"}),R=new zrender.Text({style:{text:`${Gt(d,Dt)}天`,x:g-rt,y:f/2-12/2,textFill:"white",textAlign:"left",textVerticalAlign:"middle",fill:"white"},cursor:"move"}),{width:D}=R.getBoundingRect();R.attr({style:{x:g-D-rt}});const tt=new zrender.Text({style:{text:"Assigned to: "+d.resource,x:0+g+5,y:f/2+0-12/2,textFill:"black"},cursor:"normal"});W.getBoundingRect().width+D+rt*2>g&&(tt.attr({style:{text:d.name}}),W.hide()),y.add(W),y.add(R),y.add(tt);let et=0,nt=null,G=null;y.on("dragstart",function(b){this.resizing||(et=b.event.zrX,_(this))}),y.on("drag",function(b){if(this.resizing)return;const ot=b.event.zrY-t,U=Math.floor(ot/(f+w));if(nt!==U){nt=U,m.remove(G);const j=Ut(n,t,X,S,U);G=j,j&&m.add(j),m.refresh()}}),y.on("dragend",function(b){if(console.log("dragend"),this.resizing){this.resizing=!1;return}const ot=b.event.zrX-et,U=ot<0?-1:1,j=Math.abs(ot),bt=j%c,ft=U*(Math.floor(j/c)+Math.floor(bt/q)),Lt=b.event.zrY-t,V=Math.floor(Lt/(f+w)),Mt=V-z;d.start+=ft,G&&V!==z&&(v.splice(z,1),v.splice(V>z?V-1:V,0,{...d})),(ft||Mt)&&$(),_(null),C(!0)}),y.eachChild(function(b){b.attr({z:10})}),y.on("dblclick",function(){B.show();const b=document.querySelector("#current-task");b.value=JSON.stringify(v[this.index],null,2),b.dataset.index=this.index}),m.add(y)}),it&&console.log({drawTaskBar:ht})}window.redrawChart=C;C();
